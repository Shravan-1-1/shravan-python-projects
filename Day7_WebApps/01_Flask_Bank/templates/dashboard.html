from flask import Flask, render_template, request, redirect, url_for, session
import json
import os

app = Flask(__name__)
app.secret_key = "shravan_super_secret_key_2026"

# Smart Bank Data (tere Day3 code se)
BANK_DATA = "bank_data.json"

def load_bank_data():
    if os.path.exists(BANK_DATA):
        with open(BANK_DATA, 'r') as f:
            return json.load(f)
    return {"balance": 5000, "transactions": []}

def save_bank_data(data):
    with open(BANK_DATA, 'w') as f:
        json.dump(data, f, indent=2)

@app.route('/')
def home():
    if 'user' not in session:
        return redirect(url_for('login'))
    
    data = load_bank_data()
    return render_template('dashboard.html', 
                         balance=data['balance'], 
                         transactions=data['transactions'][-5:])

@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        if username == 'shravan':  # Simple auth
            session['user'] = username
            return redirect(url_for('home'))
    return '''
    <!doctype html>
    <title>Smart Bank - Login</title>
    <h1>ğŸ”¥ Shravan Smart Bank</h1>
    <form method=post>
        Username: <input type=text name=username value="shravan"><br>
        <input type=submit value=Login>
    </form>
    '''

@app.route('/deposit', methods=['POST'])
def deposit():
    data = load_bank_data()
    amount = float(request.form['amount'])
    data['balance'] += amount
    data['transactions'].append({
        'type': 'Deposit', 
        'amount': amount, 
        'time': '2026-02-28'
    })
    save_bank_data(data)
    return redirect(url_for('home'))

@app.route('/withdraw', methods=['POST'])  
def withdraw():
    data = load_bank_data()
    amount = float(request.form['amount'])
    if data['balance'] >= amount:
        data['balance'] -= amount
        data['transactions'].append({
            'type': 'Withdraw', 
            'amount': -amount, 
            'time': '2026-02-28'
        })
        save_bank_data(data)
    return redirect(url_for('home'))

if __name__ == '__main__':
    app.run(debug=True)
ğŸ–¼ï¸ HTML Template banao: 01_Flask_Bank/templates/dashboard.html
xml
<!DOCTYPE html>
<html>
<head>
    <title>Shravan Smart Bank</title>
    <style>
        body { font-family: Arial; margin: 40px; background: #f0f8ff; }
        .balance { background: #4CAF50; color: white; padding: 20px; border-radius: 10px; text-align: center; }
        .btn { background: #2196F3; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .transaction { background: #f9f9f9; margin: 10px 0; padding: 15px; border-left: 4px solid #2196F3; }
    </style>
</head>
<body>
    <h1>ğŸ”¥ Shravan Smart Bank - Dashboard</h1>
    
    <div class="balance">
        <h2>ğŸ’° Balance: â‚¹{{ balance|round(2) }}</h2>
    </div>
    
    <h3>ğŸ’¸ Quick Actions</h3>
    <form method="post" action="/deposit">
        <input type="number" name="amount" placeholder="Deposit Amount" step="0.01" required> 
        <button class="btn" type="submit">Deposit ğŸ’µ</button>
    </form>
    
    <form method="post" action="/withdraw">
        <input type="number" name="amount" placeholder="Withdraw Amount" step="0.01" required>
        <button class="btn" type="submit">Withdraw ğŸ’³</button>
    </form>
    
    <h3>ğŸ“Š Recent Transactions</h3>
    {% for trans in transactions %}
    <div class="transaction">
        {{ trans.time }}: {{ trans.type }} â‚¹{{ trans.amount|round(2) }}
    </div>
    {% endfor %}
    
    <p><a href="/login">Logout</a></p>
</body>
</html>